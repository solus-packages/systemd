From 7bb7ea800fbc4f52b6d808d166b7c73fda91d7fe Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey@solus-project.com>
Date: Wed, 29 Mar 2017 02:57:39 +0100
Subject: [PATCH 2/2] efi-boot-generator: Do not automount the ESP on Solus

We use clr-boot-manager, thus it is undesirable to automount the ESP, as
we want it unmounted constantly. When required, clr-boot-manager will locate
the ESP, mount it, perform updates, and unmount it again.

Signed-off-by: Ikey Doherty <ikey@solus-project.com>
---
 src/efi-boot-generator/efi-boot-generator.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/efi-boot-generator/efi-boot-generator.c b/src/efi-boot-generator/efi-boot-generator.c
index 99a819f..4afa706 100644
--- a/src/efi-boot-generator/efi-boot-generator.c
+++ b/src/efi-boot-generator/efi-boot-generator.c
@@ -75,6 +75,9 @@ int main(int argc, char *argv[]) {
                 return EXIT_SUCCESS;
         }
 
+        log_debug("/boot automount is disabled on Solus, exiting.");
+        return EXIT_SUCCESS;
+
         r = efi_loader_get_device_part_uuid(&id);
         if (r == -ENOENT) {
                 log_debug("EFI loader partition unknown, exiting.");
-- 
2.12.2

